<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VideoHub PRO</title>

<style>
body{
    margin:0;
    font-family:system-ui;
    background:#0b0e1a;
    color:white;
}
header{
    background:linear-gradient(90deg,#ff0080,#7928ca);
    padding:12px;
    display:flex;
    justify-content:space-between;
    align-items:center;
}
main{padding:12px}
input,button{
    padding:6px;
    border-radius:6px;
    border:none;
}
button{
    background:#ff2e88;
    color:white;
    cursor:pointer;
}
.card{
    background:#161a33;
    padding:10px;
    border-radius:10px;
    margin-bottom:12px;
}
img,video{
    width:100%;
    border-radius:8px;
}
.comment{
    background:#22265a;
    padding:6px;
    margin-top:4px;
    border-radius:6px;
}
</style>
</head>

<body>

<header>
    <b>üé¨ VideoHub PRO</b>
    <div>
        <input id="name" placeholder="–Ü–º º—è">
        <button onclick="login()">–í—Ö—ñ–¥</button>
        <span id="user"></span>
    </div>
</header>

<main>

<h3>üì§ –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤—ñ–¥–µ–æ</h3>
<input type="file" id="video" accept="video/*">
<input type="file" id="cover" accept="image/*">
<button onclick="upload()">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏</button>

<hr>

<input id="search" placeholder="ü§ñ AI –ø–æ—à—É–∫" oninput="aiSearch()">

<button onclick="analytics()">üìä AI –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞</button>

<hr>

<div id="videos"></div>

<h3>üëë –ê–¥–º—ñ–Ω</h3>
<input id="adminPass" placeholder="–ü–∞—Ä–æ–ª—å">
<button onclick="adminLogin()">–£–≤—ñ–π—Ç–∏</button>
<div id="admin"></div>

</main>

<script>
let user = localStorage.getItem("user") || "";
let videos = JSON.parse(localStorage.getItem("videos")||"[]");
let interests = JSON.parse(localStorage.getItem("interests")||"{}");
let isAdmin = false;

const covers = [
 "https://picsum.photos/400/200?1",
 "https://picsum.photos/400/200?2",
 "https://picsum.photos/400/200?3"
];

document.getElementById("user").innerText = user ? "üë§ "+user : "";

function login(){
    if(!name.value) return;
    localStorage.setItem("user",name.value);
    location.reload();
}

function upload(){
    if(!user) return alert("–£–≤—ñ–π–¥–∏");
    const v = video.files[0];
    if(!v) return;

    videos.push({
        video:URL.createObjectURL(v),
        cover: cover.files[0]
            ? URL.createObjectURL(cover.files[0])
            : covers[Math.floor(Math.random()*covers.length)],
        likes:0,
        views:0,
        comments:[],
        author:user,
        time:Date.now()
    });
    save();
}

function like(i){
    videos[i].likes++;
    interests[videos[i].author]=(interests[videos[i].author]||0)+1;
    localStorage.setItem("interests",JSON.stringify(interests));
    save();
}

function view(i){
    videos[i].views++;
    save(false);
}

const banned=["–º–∞—Ç","—ñ–¥—ñ–æ—Ç","–¥—É—Ä–µ–Ω—å"];
function comment(i){
    const t=prompt("–ö–æ–º–µ–Ω—Ç–∞—Ä");
    if(!t) return;
    if(banned.some(w=>t.toLowerCase().includes(w)))
        return alert("ü§ñ AI: –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ");
    videos[i].comments.push(user+": "+t);
    save();
}

function aiScore(v){
    const age=(Date.now()-v.time)/1000000;
    const boost=interests[v.author]?interests[v.author]*2:0;
    return v.likes*3+v.views*2+boost-age;
}

function render(list=videos){
    videos.sort((a,b)=>aiScore(b)-aiScore(a));
    videosBox.innerHTML="";
    list.forEach((v,i)=>{
        videosBox.innerHTML+=`
        <div class="card">
            <img src="${v.cover}">
            <video controls src="${v.video}" onplay="view(${i})"></video>
            ‚ù§Ô∏è ${v.likes} | üëÄ ${v.views}
            <br>
            ü§ñ AI: ${Math.floor(aiScore(v))}
            <br>
            <button onclick="like(${i})">–õ–∞–π–∫</button>
            <button onclick="comment(${i})">–ö–æ–º–µ–Ω—Ç</button>
            ${isAdmin?`<button onclick="del(${i})">‚ùå</button>`:""}
            ${v.comments.map(c=>`<div class="comment">${c}</div>`).join("")}
        </div>`;
    });
}

function aiSearch(){
    const q=search.value.toLowerCase();
    render(videos.filter(v=>v.author.toLowerCase().includes(q)));
}

function analytics(){
    alert(`ü§ñ AI –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞
–í—ñ–¥–µ–æ: ${videos.length}
–ü–µ—Ä–µ–≥–ª—è–¥–∏: ${videos.reduce((a,v)=>a+v.views,0)}
–õ–∞–π–∫–∏: ${videos.reduce((a,v)=>a+v.likes,0)}`);
}

function adminLogin(){
    if(adminPass.value==="admin123"){
        isAdmin=true;
        admin.innerText="üëë –ê–¥–º—ñ–Ω –∞–∫—Ç–∏–≤–Ω–∏–π";
        render();
    }
}

function del(i){
    videos.splice(i,1);
    save();
}

function save(r=true){
    localStorage.setItem("videos",JSON.stringify(videos));
    if(r) render();
}

const videosBox=document.getElementById("videos");
render();
</script>

</body>
</html>
